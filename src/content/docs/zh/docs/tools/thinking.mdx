---
title: 思考等级 (Thinking Levels)
description: /think 和 /verbose 指令的语法及其如何影响模型推理。
sidebar:
  label: 思考等级 (Thinking Levels)
  order: 12
---

# 思考等级 (/think 指令)

## 功能
- 任意入站消息中的内联指令：`/t <level>`, `/think:<level>`, 或 `/thinking <level>`。
- 等级 (别名)：`off | minimal | low | medium | high | xhigh` (仅限 GPT-5.2 + Codex 模型)
  - minimal → "think"
  - low → "think hard"
  - medium → "think harder"
  - high → "ultrathink" (最大预算)
  - xhigh → "ultrathink+" (仅限 GPT-5.2 + Codex 模型)
  - `highest`, `max` 映射到 `high`。
- 提供商说明：
  - Z.AI (`zai/*`) 仅支持二进制思考 (`on`/`off`)。任何非 `off` 的等级都被视为 `on` (映射到 `low`)。

## 解析顺序
1. 消息上的内联指令 (仅应用于该消息)。
2. 会话覆盖 (通过发送仅包含指令的消息设置)。
3. 全局默认值 (配置中的 `agents.defaults.thinkingDefault`)。
4. 回退：对于具备推理能力的模型为 `low`；否则为 `off`。

## 设置会话默认值
- 发送一条**仅包含**指令的消息 (允许空格)，例如 `/think:medium` 或 `/t high`。
- 这将在当前会话中保持有效 (默认按发送者区分)；通过 `/think:off` 或会话空闲重置来清除。
- 会发送确认回复 (`Thinking level set to high.` / `Thinking disabled.`)。如果等级无效 (例如 `/thinking big`)，命令会被拒绝并给出提示，会话状态保持不变。
- 发送 `/think` (或 `/think:`) 不带参数以查看当前思考等级。

## Agent 应用
- **Embedded Pi**: 解析后的等级会传递给进程内的 Pi agent 运行时。

## 详细模式指令 (/verbose 或 /v)
- 等级：`on` (minimal) | `full` | `off` (默认)。
- 仅包含指令的消息会切换会话的详细模式，并回复 `Verbose logging enabled.` / `Verbose logging disabled.`；无效等级会返回提示而不改变状态。
- `/verbose off` 存储显式的会话覆盖；可以通过会话 UI 选择 `inherit` 来清除它。
- 内联指令仅影响该消息；否则应用会话/全局默认值。
- 发送 `/verbose` (或 `/verbose:`) 不带参数以查看当前详细等级。
- 当详细模式开启时，发出结构化工具结果的 Agent (Pi, 其他 JSON Agent) 会将每个工具调用作为单独的仅元数据消息发回，前缀为 `<emoji> <tool-name>: <arg>` (如果可用)。这些工具摘要在每个工具开始时立即发送 (单独的气泡)，而不是作为流式增量发送。
- 当详细模式为 `full` 时，工具输出也会在完成后转发 (单独的气泡，截断到安全长度)。如果你在运行过程中切换 `/verbose on|full|off`，后续的工具气泡将遵循新设置。

## 推理可见性 (/reasoning)
- 等级：`on|off|stream`。
- 仅包含指令的消息切换是否在回复中显示思考块。
- 启用时，推理内容作为**单独的消息**发送，前缀为 `Reasoning:`。
- `stream` (仅限 Telegram)：在生成回复时将推理内容流式传输到 Telegram 草稿气泡中，然后发送不带推理的最终答案。
- 别名：`/reason`。
- 发送 `/reasoning` (或 `/reasoning:`) 不带参数以查看当前推理等级。

## 相关
- 提升模式 (Elevated mode) 文档位于 [Elevated mode](/docs/tools/elevated)。

## 心跳 (Heartbeats)
- 心跳探测体是配置的心跳提示词 (默认：`Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.`)。心跳消息中的内联指令照常应用 (但避免在心跳中更改会话默认值)。
- 心跳投递默认为仅最终有效载荷。要同时也发送单独的 `Reasoning:` 消息 (如果可用)，请设置 `agents.defaults.heartbeat.includeReasoning: true` 或每个 Agent 的 `agents.list[].heartbeat.includeReasoning: true`。

## Web 聊天 UI
- Web 聊天思考选择器在页面加载时反映来自入站会话存储/配置的会话存储等级。
- 选择另一个等级仅应用于下一条消息 (`thinkingOnce`)；发送后，选择器会弹回存储的会话等级。
- 要更改会话默认值，请发送 `/think:<level>` 指令 (如前所述)；选择器将在下次重新加载后反映它。
