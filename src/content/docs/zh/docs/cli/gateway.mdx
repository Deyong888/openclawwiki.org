---
summary: "OpenClaw 网关 CLI (`openclaw gateway`) — 运行、查询和发现网关"
read_when:
  - 从 CLI 运行网关 (开发或服务器)
  - 调试网关认证、绑定模式和连接
  - 通过 Bonjour (LAN + tailnet) 发现网关
title: "gateway"
---

# 网关 CLI

网关是 OpenClaw 的 WebSocket 服务器 (频道, 节点, 会话, 钩子)。

本页中的子命令位于 `openclaw gateway …` 下。

相关文档:

- [/zh/docs/gateway/bonjour](/zh/docs/gateway/bonjour)
- [/zh/docs/gateway/discovery](/zh/docs/gateway/discovery)
- [/zh/docs/gateway/configuration](/zh/docs/gateway/configuration)

## 运行网关

运行本地网关进程:

```bash
openclaw gateway
```

前台别名:

```bash
openclaw gateway run
```

注意:

- 默认情况下，除非在 `~/.openclaw/openclaw.json` 中设置了 `gateway.mode=local`，否则网关拒绝启动。使用 `--allow-unconfigured` 进行临时/开发运行。
- 阻止在没有认证的情况下绑定到环回接口以外 (安全护栏)。
- `SIGUSR1` 在授权时触发进程内重启 (启用 `commands.restart` 或使用网关工具/配置应用/更新)。
- `SIGINT`/`SIGTERM` 处理程序停止网关进程，但它们不恢复任何自定义终端状态。如果您用 TUI 或原始模式输入包装 CLI，请在退出前恢复终端。

### 选项

- `--port <port>`: WebSocket 端口 (默认来自配置/环境; 通常为 `18789`)。
- `--bind <loopback|lan|tailnet|auto|custom>`: 侦听器绑定模式。
- `--auth <token|password>`: 认证模式覆盖。
- `--token <token>`: 令牌覆盖 (也为进程设置 `OPENCLAW_GATEWAY_TOKEN`)。
- `--password <password>`: 密码覆盖 (也为进程设置 `OPENCLAW_GATEWAY_PASSWORD`)。
- `--tailscale <off|serve|funnel>`: 通过 Tailscale 暴露网关。
- `--tailscale-reset-on-exit`: 关机时重置 Tailscale serve/funnel 配置。
- `--allow-unconfigured`: 允许在配置中没有 `gateway.mode=local` 的情况下启动网关。
- `--dev`: 如果丢失，创建开发配置 + 工作区 (跳过 BOOTSTRAP.md)。
- `--reset`: 重置开发配置 + 凭据 + 会话 + 工作区 (需要 `--dev`)。
- `--force`: 在启动前杀死选定端口上的任何现有侦听器。
- `--verbose`: 详细日志。
- `--claude-cli-logs`: 仅在控制台中显示 claude-cli 日志 (并启用其 stdout/stderr)。
- `--ws-log <auto|full|compact>`: websocket 日志样式 (默认 `auto`)。
- `--compact`: `--ws-log compact` 的别名。
- `--raw-stream`: 将原始模型流事件记录到 jsonl。
- `--raw-stream-path <path>`: 原始流 jsonl 路径。

## 查询正在运行的网关

所有查询命令都使用 WebSocket RPC。

输出模式:

- 默认: 人类可读 (在 TTY 中着色)。
- `--json`: 机器可读 JSON (无样式/旋转器)。
- `--no-color` (或 `NO_COLOR=1`): 禁用 ANSI 但保持人类布局。

共享选项 (在支持的地方):

- `--url <url>`: 网关 WebSocket URL。
- `--token <token>`: 网关令牌。
- `--password <password>`: 网关密码。
- `--timeout <ms>`: 超时/预算 (每个命令不同)。
- `--expect-final`: 等待 “最终” 响应 (代理调用)。

### `gateway health`

```bash
openclaw gateway health --url ws://127.0.0.1:18789
```

### `gateway status`

`gateway status` 显示网关服务 (launchd/systemd/schtasks) 加上可选的 RPC 探测。

```bash
openclaw gateway status
openclaw gateway status --json
```

选项:

- `--url <url>`: 覆盖探测 URL。
- `--token <token>`: 探测的令牌认证。
- `--password <password>`: 探测的密码认证。
