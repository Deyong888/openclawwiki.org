---
summary: "监控模型提供商的 OAuth 过期情况"
title: "认证监控"
---

# 认证监控

OpenClaw 通过 `openclaw models status` 公开 OAuth 的过期健康状态。你可以将其用于自动化和告警；脚本是可选的，主要用于手机端工作流。

## 首选：CLI 检查（便携式）

```bash
openclaw models status --check
```

退出码：

- `0`: 正常 (OK)
- `1`: 凭证已过期或缺失
- `2`: 即将过期（24小时内）

这可以在 cron/systemd 中运行，不需要额外的脚本。

## 可选脚本（运维 / 手机工作流）

这些脚本位于 `scripts/` 目录下，是**可选的**。它们假设你可以通过 SSH 访问 Gateway 主机，并针对 systemd + Termux 进行了优化。

- `scripts/claude-auth-status.sh`：现在使用 `openclaw models status --json` 作为事实来源（如果 CLI 不可用，则回退到直接读取文件），因此请确保 `openclaw` 在定时器的 `PATH` 中。
- `scripts/auth-monitor.sh`：cron/systemd 定时器目标；发送告警（通过 ntfy 或手机）。
- `scripts/systemd/openclaw-auth-monitor.{service,timer}`：systemd 用户定时器。
- `scripts/claude-auth-status.sh`：Claude Code + OpenClaw 认证检查器（完整/JSON/简单模式）。
- `scripts/mobile-reauth.sh`：通过 SSH 进行的引导式重新认证流程。
- `scripts/termux-quick-auth.sh`：点击式小部件状态检查 + 打开认证 URL。
- `scripts/termux-auth-widget.sh`：完整的引导式小部件流程。
- `scripts/termux-sync-widget.sh`：将 Claude Code 凭证同步到 OpenClaw。

如果你不需要手机自动化或 systemd 定时器，可以跳过这些脚本。
